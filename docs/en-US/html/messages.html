<p>&lt;h1&gt;Messages&lt;/h1&gt;</p>

<p>&lt;p&gt;The client allow you to send and receive messages through the Messaging Hub.&lt;/p&gt;</p>

<p>&lt;h2&gt;Receiving Messages&lt;/h2&gt;</p>

<p>&lt;p&gt;To receive a message, register a receiver like so:&lt;/p&gt;</p>

<p>&lt;pre&gt;&lt;code&gt;
public class MyMessageReceiver : MessageReceiverBase
{
    public override async Task ReceiveAsync(Message message)
    {
        // Write the received message to the console
        Console.WriteLine(message.Content.ToString());
    }
}</p>

<p>client.AddMessageReceiver(new MyMessageReceiver(), MediaTypes.PlainText);
&lt;/code&gt;&lt;/pre&gt;</p>

<p>&lt;p&gt;It is also possible to pass a factory method to construct the receiver:&lt;/p&gt;</p>

<p>&lt;pre&gt;&lt;code&gt;
client.AddMessageReceiver(() =&gt; new MyMessageReceiver(), MediaTypes.PlainText);
&lt;/code&gt;&lt;/pre&gt;</p>

<p>&lt;p&gt;And you can specify a &lt;code&gt;media type&lt;/code&gt; to filter your messages&lt;/p&gt;</p>

<p>&lt;pre&gt;&lt;code&gt;
client.AddMessageReceiver(() =&gt; new MyMessageReceiver(), new MediaType(MediaType.DiscreteTypes.Application, MediaType.SubTypes.JSON));
&lt;/code&gt;&lt;/pre&gt;</p>

<p>&lt;h2&gt;Sending Messages&lt;/h2&gt;</p>

<p>&lt;p&gt;To send a message, you can use the following method:&lt;/p&gt;</p>

<p>&lt;pre&gt;&lt;code&gt;
var message = new Message
{
    To = Node.Parse(&quot;user&quot;),
    Content = &quot;Message Text&quot;
};</p>

<p>await client.SendMessageAsync(message);
&lt;/code&gt;&lt;/pre&gt;</p>

<p>&lt;p&gt;Or you can use these extension methods to construct and send your message:&lt;/p&gt;</p>

<p>&lt;pre&gt;&lt;code&gt;
await client.SendMessageAsync(&quot;Message Text&quot;, to: &quot;user&quot;);</p>

<p>await client.SendMessageAsync(&quot;Message Text&quot;, Node.Parse(&quot;user&quot;));
&lt;/code&gt;&lt;/pre&gt;</p>

<p>&lt;p&gt;&lt;a href=&quot;./index.html&quot;&gt;Back to the Index&lt;/a&gt;&lt;/p&gt;</p>
