<h1>
<a id="user-content-getting-started" class="anchor" href="#getting-started" aria-hidden="true"><span class="octicon octicon-link"></span></a>Getting Started</h1>

<p>This getting started guide will show you how to use the basic functionalities of the Messaging Hub Client </p>

<h2>
<a id="user-content-instantiating-a-client" class="anchor" href="#instantiating-a-client" aria-hidden="true"><span class="octicon octicon-link"></span></a>Instantiating a client:</h2>

<pre><code>
const string login = "guest";
const string password = "guest";

var client = new MessagingHubClient() // Since host name and domain name are not informed, the default value, 'msging.net', will be used for both parameters
                .UsingAccount(login, password);
</code></pre>

<h2>
<a id="user-content-subscribing-to-receive-a-plain-text-message" class="anchor" href="#subscribing-to-receive-a-plain-text-message" aria-hidden="true"><span class="octicon octicon-link"></span></a>Subscribing to receive a plain text message:</h2>

<pre><code>
public class PlainTextMessageReceiver : MessageReceiverBase
{
    public override async Task ReceiveAsync(Message message)
    {
        Console.WriteLine(message.Content.ToString());
        await MessageSender.SendMessageAsync("Thanks for your message!", message.From);
    }
}

client.AddMessageReceiver(messageReceiver: new PlainTextMessageReceiver(), forMimeType: MediaTypes.PlainText);
</code></pre>

<h2>
<a id="user-content-subscribing-to-receive-a-notification" class="anchor" href="#subscribing-to-receive-a-notification" aria-hidden="true"><span class="octicon octicon-link"></span></a>Subscribing to receive a notification:</h2>

<pre><code>
public class PrintNotificationReceiver : NotificationReceiverBase
{
    public override Task ReceiveAsync(Notification notification)
    {
        Console.WriteLine("Notification of {0} event received. Reason: {1}", notification.Event, notification.Reason);
        return Task.FromResult(0);
    }
}

client.AddNotificationReceiver(receiverBuilder: () =&gt; new PrintNotificationReceiver());
</code></pre>

<h2>
<a id="user-content-starting-the-client" class="anchor" href="#starting-the-client" aria-hidden="true"><span class="octicon octicon-link"></span></a>Starting the client:</h2>

<pre><code>
// AFTER registered the reveivers, the client MUST be started
await client.StartAsync();
</code></pre>

<h2>
<a id="user-content-sending-a-command-and-accessing-its-response" class="anchor" href="#sending-a-command-and-accessing-its-response" aria-hidden="true"><span class="octicon octicon-link"></span></a>Sending a command and accessing its response:</h2>

<pre><code>
var command = new Command {
    Method = CommandMethod.Get,
    Uri = new LimeUri("/account")
};

var responseCommand = await client.SendCommandAsync(command);

var account = (Account)responseCommand.Resource;

Console.WriteLine(account.Email);
</code></pre>

<h2>
<a id="user-content-publishing-a-message" class="anchor" href="#publishing-a-message" aria-hidden="true"><span class="octicon octicon-link"></span></a>Publishing a message:</h2>

<pre><code>
await client.SendMessageAsync("Hello, world", to: "user");
</code></pre>

<h2>
<a id="user-content-disconnecting" class="anchor" href="#disconnecting" aria-hidden="true"><span class="octicon octicon-link"></span></a>Disconnecting:</h2>

<pre><code>
await client.StopAsync();
</code></pre>

<p><a href="./index.html">Back to the Index</a></p>

